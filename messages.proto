syntax = "proto3";
package messages;

option java_package = "dev.yanshouwang.camerax.messages";

message Command {
  CommandCategory category = 1;
  oneof arguments {
    CameraControllerBindCommandArguments camera_controller_bind_arguments = 2;
    CameraControllerUnbindCommandArguments camera_controller_unbind_arguments = 3;
    CameraControllerTorchCommandArguments camera_controller_torch_arguments = 4;
    CameraControllerZoomCommandArguments camera_controller_zoom_arguments = 5;
    CameraControllerFocusAutomaticallyCommandArguments camera_controller_focus_automatically_arguments = 6;
    CameraControllerFocusManuallyCommandArguments camera_controller_focus_manually_arguments = 7;
    ImageProxyCloseCommandArguments image_proxy_close_arguments = 8;
  }
}

enum CommandCategory {
  COMMAND_CATEGORY_GET_QUARTER_TURNS = 0;
  COMMAND_CATEGORY_CAMERA_CONTROLLER_REQUEST_PERMISSION = 1;
  COMMAND_CATEGORY_CAMERA_CONTROLLER_BIND = 2;
  COMMAND_CATEGORY_CAMERA_CONTROLLER_UNBIND = 3;
  COMMAND_CATEGORY_CAMERA_CONTROLLER_TORCH = 4;
  COMMAND_CATEGORY_CAMERA_CONTROLLER_ZOOM = 5;
  COMMAND_CATEGORY_CAMERA_CONTROLLER_FOCUS_AUTOMATICALLY = 6;
  COMMAND_CATEGORY_CAMERA_CONTROLLER_FOCUS_MANUALLY = 7;
  COMMAND_CATEGORY_IMAGE_PROXY_CLOSE = 8;
}

message CameraControllerBindCommandArguments {
  CameraSelector selector = 1;
}

message CameraControllerUnbindCommandArguments {
  CameraSelector selector = 1;
}

message CameraControllerTorchCommandArguments {
  CameraSelector selector = 1;
  bool state = 2;
}

message CameraControllerZoomCommandArguments {
  CameraSelector selector = 1;
  double value = 2;
}

message CameraControllerFocusAutomaticallyCommandArguments {
  CameraSelector selector = 1;
}

message CameraControllerFocusManuallyCommandArguments {
  CameraSelector selector = 1;
  double width = 2;
  double height = 3;
  double x = 4;
  double y = 5;
}

message ImageProxyCloseCommandArguments {
  CameraSelector selector = 1;
  string id = 2;
}

message Reply {
  oneof arguments {
    GetQuarterTurnsReplyArguments get_quarter_turns_arguments = 1;
    CameraControllerRequestPermissionReplyArguments camera_controller_request_permission_arguments = 2;
    CameraControllerBindReplyArguments camera_controller_bind_arguments = 3;
  }
}

message GetQuarterTurnsReplyArguments {
  int32 quarter_turns = 1;
}

message CameraControllerRequestPermissionReplyArguments {
  bool granted = 1;
}

message CameraControllerBindReplyArguments {
  CameraValue camera_value = 1;
}

message Event {
  EventCategory category = 1;
  oneof arguments {
    QuarterTurnsChangedEventArguments quarter_turns_changed_arguments = 2;
    CameraControllerImageProxiedEventArguments camera_controller_image_proxied_arguments = 3;
  }
}

enum EventCategory {
  EVENT_CATEGORY_QUARTER_TURNS_CHANGED = 0;
  EVENT_CATEGORY_CAMERA_CONTROLLER_IMAGE_PROXIED = 1;
}

message QuarterTurnsChangedEventArguments {
  int32 quarter_turns = 1;
}

message CameraControllerImageProxiedEventArguments {
  ImageProxy image_proxy = 1;
}

message CameraSelector {
  CameraFacing facing = 1;
}

enum CameraFacing {
  CAMERA_FACING_BACK = 0;
  CAMERA_FACING_FRONT = 1;
}

message CameraValue {
  int32 texture_id = 1;
  int32 texture_width = 2;
  int32 texture_height = 3;
  bool torch_available = 4;
  double zoom_minimum = 5;
  double zoom_maximum = 6;
}

message ImageProxy {
  CameraSelector selector = 1;
  string id = 2;
  bytes data = 3;
  int32 width = 4;
  int32 height = 5;
}