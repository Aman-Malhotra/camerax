syntax = "proto3";
package messages;

option java_package = "dev.yanshouwang.camerax.message";

message Command {
  string key = 1;
  CommandCategory category = 2;
  oneof stub {
    OpenArguments open_arguments = 3;
    bool torch_state = 4;
    double zoom_value = 5;
  }
}

message Event {
  string key = 1;
  EventCategory category = 2;
  oneof stub {
    int32 quarterTurns = 3;
    bool torch_state = 4;
    double zoom_value = 5;
    ImageProxy image = 6;
  }
}

message OpenArguments {
  CameraSelector selector = 1;
}

message CameraSelector {
  CameraFacing facing = 1;
}

message CameraValue {
  string key = 1;
  TextureValue texture_value = 2;
  TorchValue torch_value = 3;
  ZoomValue zoom_value = 4;
}

message TextureValue {
  int32 id = 1;
  int32 width = 2;
  int32 height = 3;
  int32 quarterTurns = 4;
}

message TorchValue {
  bool available = 1;
  bool state = 2;
}

message ZoomValue {
  double minimum = 1;
  double maximum = 2;
  double value = 3;
}

message ImageProxy {
  string key = 1;
  bytes data = 2;
  int32 width = 3;
  int32 height = 4;
}

enum CommandCategory {
  OPEN = 0;
  CLOSE = 1;
  TORCH = 2;
  ZOOM = 3;
  CLOSE_IMAGE_PROXY = 4;
}

enum EventCategory {
  QUARTER_TURNS_CHANGED = 0;
  TORCH_STATE_CHANGED = 1;
  ZOOM_VALUE_CHANGED = 2;
  IMAGE_PROXY_RECEIVED = 3;
}

enum CameraFacing {
  BACK = 0;
  FRONT = 1;
}